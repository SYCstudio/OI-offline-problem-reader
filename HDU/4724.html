<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>If You Know This,You Must Have NO GF</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4724. If You Know This,You Must Have NO GF</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">In software development, Make is a utility that automatically builds executable programs and libraries from source code by reading files called makefiles which specify how to derive the target program. Though integrated development environments and language-specific compiler features can also be used to manage a build process, Make remains widely used, especially in Unix.<br>Now let's have a look at the grammar of makefile. Please note that in this problem, we have simplified the problem a lot, so read carefully, especially when you are familiar with such things. In this problem, makefile contains three kinds of statements:<br><br>1. Target: [component ...]<br><br>This is a statement to define a target. To build &quot;Target&quot;, you have to generate all the files in [component ...] at first. Here is an example:<br>a.o: a.cc b.cc<br>Which means if you want to generate file a.o, you have to make sure that there are already file a.cc and b.cc in the directory.<br>Each component(including the target itself) will be a string which is a legal file's name, as &quot;aaa&quot; or &quot;aaa.bbb&quot;. They will be separated by some spaces.<br>A legal file's name will only contain letters (upper case and lower case), numbers and only contain one dot (.).<br>There won't be two Targets sharing a same file name. Also relations between files won't form a circle.<br><br>2. Commands<br><br>This is a command shows how to build the Target, usually written after statement 1. Here is an example:<br><pre>    g++ a.o b.o -o main</pre><br>Note this kind of commands will have <b>*FOUR SPACES*</b> at the front of the line.<br>There maybe two or more commands after statement 1.<br><br>3. Comments<br><br>Comments begin with character '#', which should be ignored. Note that '#' can appear in any place in the line, and all character after '#' in the line shall be ignored. Here is an example:<br>a.o: a.cc b.cc #hello world!<br>This should be regarded as<br>a.o: a.cc b.cc<br><br>Sometimes you may find a statement is too long to be written in a single line. You can add a '\' at the end of the line, indicating that there are still part of statement at the next line. Here is an example:<br><pre>main: a.o\<br>    b.o<br>g++ a.o b.o -o main</pre><br>This equals to the statement<br><pre>main: a.o b.o<br>    g++ a.o b.o -o main</pre><br>Notice that '\' will only appear at end of the line and not appear in comments.<br>Now this is all a makefile will have.<br>You have a makefile, and you will execute Q &quot;make&quot; commands one by one. There are already some files in the directory.<br>The make command is like this:<br>make Target<br>Which will try to generate a file named &quot;Target&quot;.<br>If there are no such &quot;Target&quot; defined in the makefile, or it cannot be built since lack of files. This command will not get executed.<br>Your task is, after executing each command, how many new files will appear in the directory?</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The first line has a number T (T &lt;= 10) , indicating the number of test cases.<br>Then some lines come, indicating the content of makefile. A string &quot;====&quot; indicating the end of makefile. each line is no longer than 1000 characters. the size of makefile will not exceed 1MB. <br>There are at most 500 target in the Makefile.<br>Then comes a single line with a number N(N &lt;= 500). Which is the number of files that are already in the directory.<br>Then come N lines each with a file name.<br>Then comes a single line with a number Q(Q &lt;= 500). Which is the number of command you are going to execute.<br>Then come Q lines each with a command, within the pattern &quot;make Target&quot;.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For test case X, output &quot;Case #X:&quot; first, in a single line.<br>Then for each command, output the number of newly built files in a single line. If the command are not executed, output &quot;0&quot;.<br>There should be a blank line *BETWEEN* each test case.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">[pre]2
main: a.o b.o
    g++ a.o b.o -o main
a.o: a.cc
    g++ a.cc -o a.o -c
b.o: b.cc
    g++ b.cc -o b.o -c
main2: a.o c.o
    g++ a.o c.o -o main2
====
3
a.cc
b.cc
c.o
2
make main
make main2

main: a.o b.o
    g++ a.o b.o -o main
a.o: a.cc
    g++ a.cc -o a.o -c
b.o: b.cc
    g++ b.cc -o b.o -c
main2: a.o c.o
    g++ a.o c.o -o main2
====
2
a.cc
b.cc
2
make main
make main2[/pre]</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1:
3
1

Case #2:
3
0</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2013+ACM%2FICPC+Asia+Regional+Online+%A1%AA%A1%AA+Warmup2&source=1&searchmode=source"> 2013 ACM/ICPC Asia Regional Online —— Warmup2 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>