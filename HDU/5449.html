<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Robot Dog</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5449. Robot Dog</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：3000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：131072/131072 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Mike has just found a dungeon. Inside there are n rooms and p treasure chests. Chests $1, . . . , p$ are located in room $v_1, . . . , v_p$ respectively. The rooms are connected by $n - 1$ passages. Any two rooms connected by a passage are considered adjacent. This dungeon is very special that there exists a path between any two rooms. Among these treasure chests, only chest 1 can be taken in the very beginning, others must be taken in order. That is, only after chest i is taken, may chest $i + 1$ be taken as well, for every $i ∈ \{1, . . . , p - 1\}$.<br><br>Mike is lazy, so he dislikes to explore the dungeon on his own feet. Therefore, Mike sends his robot dog, Blot, to collect the treasures in the dungeon. Blot can automatically collect the treasures from the chests, and it takes Blot exactly a second to move to any adjacent room. However, Blot’s movement is uncontrollable. Blot moves to all adjacent rooms with the same probability. For example, if there are $k$ adjacent rooms, then Blot will move to any of them with probability $\frac{1}{k}$. Please help mike to compute the expected time that Blot collects all $p$ treasures for him.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The first line on the input contains an integer $T (T \leq 10)$. There will be $T$ test cases. The first line of each test case contains an integer $n (2 \leq n \leq 50000)$ indicating the number of rooms in the dungeon. The rooms are numbered from $0$ to $n - 1$. Each of the following $n - 1$ lines contains two integers $u$ and $v (u, v ∈ \{0, . . . , n - 1\})$ indicating room $u$ and room $v$ are adjacent.<br><br>The next line contains an integer $q (q \leq 100)$ indicating the number of scenarios. Each of the following $q$ lines represents a scenario which consists of some integers $p, v_0, v_1, . . . , v_p$ separated by blanks. The first integer $p (0 &lt; p \leq 500)$ indicates there will be $p$ treasure chests. The second integer $v_0$ indicates that Blot is in room $v_0$ at the beginning. For $i ∈ \{1, . . . , p\}$, the $i-th$ treasure will be spawn at room $v_i$. You may assume v<sub>i</sub> $\neq$ v<sub>i-1</sub> for every $i ∈ \{1, . . . , p\}$.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, output $q$ lines, and the $j-th$ of them corresponds to the $j-th$ scenario of the test case. For each scenario, output the expected time in seconds such that Blot collects all treasures. Print the answer to the fourth decimal place, and separate two consecutive test cases with a blank line.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2
3
1 0
1 2
2
1 0 1
2 0 2 1
4
0 1
2 0
3 0
1
3 0 1 0 1</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1.0000
5.0000

11.0000</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2015+ACM%2FICPC+Asia+Regional+Changchun+Online&source=1&searchmode=source"> 2015 ACM/ICPC Asia Regional Changchun Online </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>