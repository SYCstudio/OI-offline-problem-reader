<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>MAP</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4329. MAP</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Many people get information from Baidu、Google、Bing and so on. OK, now we will consider how to test the performance of a search system. <br>The testing is based on an annotation file，annotation file consist of some query，every query has a query word and many reference URL. For example，“MM xxoo.com ooxx.com xoxo.com”，“MM”is the query word and “xxoo.com ooxx.com xoxo.com”is the reference URL.<br>If we search the query word from search system, we can also get a result list, and then we can test the search performance by the result list and annotation file. You job is calculate the MAP of the search performance. The definition of MAP is：<br>       <strong>Rank:</strong>  <br>                  Position of a retrieved URL in the list of retrieved list.<br>       <strong>Precision at a given cut-off rank r for a single query:</strong>  <br>                  P(r) = (number of relevant URL of rank r or less) / r<br>       <strong>Average precision:</strong> defined as follows<br><center><img style='max-width:100%;' src=./data/images/C400-1010-1.jpg></center><br>       Where N is the number of retrieved URL, R is the number of relevant URL, and rel(r) = 1 if URL at rank r is relevant, 0 otherwise. <br>       <strong>Mean average precision:</strong>  average precision for a set of queries is defined as follows:<br><center><img style='max-width:100%;' src=./data/images/C400-1010-2.jpg></center><br>       Where Q is the number of queries.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The first line of input contains T, the number of test cases.<br>For each test case start with a number n, the query number of annotation file. Then follows 2n lines, the first n lines are the annotation, every line means a query that has a word in front and the reference URL followed. The next n lines are the search result of the queries in annotation, every line means the search result of a query that has the search word in front and the retrieved URL followed.<br>n &lt;= 100.<br>The length of a line &lt;= 10000.<br>The length of a URL and word &lt;= 50.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Case number ant the MAP value with 6 digits after decimal point.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1
3
Banana banana.com
Apple iphone.com ipad.com
Software Microsoft.com IBM.com Google.com
Banana asd.com banana.com
Apple gdfgd.com iphone.com ipad.com
Software gdf.com wer.com tre.com</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 0.361111</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2012+Multi-University+Training+Contest+3&source=1&searchmode=source"> 2012 Multi-University Training Contest 3 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>