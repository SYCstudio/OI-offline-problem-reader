<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>The Query on the Tree</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4836. The Query on the Tree</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">　　度度熊最近沉迷在和树有关的游戏了，他一直认为树是最神奇的数据结构。一天他遇到这样一个问题：<br>　　有一棵树，树的每个点有点权，每次有三种操作：<br>　　1. Query x 表示查询以x为根的子树的权值和。<br>　　2. Change x y 表示把x点的权值改为y(0&lt;=y&lt;=100)。<br>　　3. Root x 表示把x变为根。<br>　　现在度度熊想请更聪明的你帮助解决这个问题。</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">　　第一行为数据组数T(1 &lt;= T &lt;= 100)<br>　　每组数据第一行为N(1&lt;= N &lt;= 10000)，表示树的节点数。<br>　　后面N-1行每行有两个数x,y ，表示x,y之间有一条边 1&lt;=x,y&lt;=N。初始时树是以1号节点为根节点。<br>　　之后的一行为N个数表示这N个点的点权(点权的范围是0到100)。<br>　　然后为整数Q（Q&lt;=1000）为操作次数。<br>　　之后的Q行为描述中的三种操作。</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">　　对于第k组输入数据，第一行输出Case #k 接下来对于每个”Query x”操作，输出以x为根的子数和。</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2
5
1 2
1 3
3 4
3 5
1 2 3 4 5
5
Query 1
Change 3 10
Query 1
Root 4
Query 3
8
1 2
1 3
3 4 
4 5
5 6
5 7
4 8
1 2 3 4 5 6 7 8
5
Query 1
Query 3
Root 5
Query 3
Query 1</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1:
15
22
18
Case #2:
36 
33
6
3</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014%C4%EA%B0%D9%B6%C8%D6%AE%D0%C7%B3%CC%D0%F2%C9%E8%BC%C6%B4%F3%C8%FC+-+%B8%B4%C8%FC&source=1&searchmode=source"> 2014年百度之星程序设计大赛 - 复赛 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>