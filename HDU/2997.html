<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Chromatron</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU2997. Chromatron</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Do you remember, during our high school, we did so much homework about light and mirror? “Draw a normal line, then calculates the angle of incidence and the angle of reflection.” So familiar! And I also remember, in that time, I was deeply attracted by a game called Chromatron.<br>Chromatron is a game all about reflections. Laser beams and many kinds of tools can be used in order to allow the pinwheels being hit by the correct lights that have the same color.<br>If you’ve played before, you will know that this game uses a very complicated (or you may say mysterious) way to store the current condition. If you press Ctrl+C on its interface and paste it somewhere, you will get code like “1-15-tJoIHWhNHAcgJnmxhCOx” which represents the first picture. And a question comes to my mind, what do those characters exactly mean?<br><center><img style='max-width:100%;' src=./data/images/C270-1005-1.jpg></center> <br><center><img style='max-width:100%;' src=./data/images/C270-1005-2.jpg></center> <br><center><img style='max-width:100%;' src=./data/images/C270-1005-3.jpg></center><br><center><img style='max-width:100%;' src=./data/images/C270-1005-4.jpg></center><br>After researching for a long time, I’ve finally got what I want. Here comes:<br>Two dashes separate the string into three parts. The first two parts denotes the version and level you are playing, which tell the system which initial situation should be load. The third part, tell the system how and where the tools are placed in the table.<br><br>But one question still remains, how does the tools being indicated?<br>In order to figure it out, I divide the string into several continuous units, two characters per unit. Follow the rules below, we can easily infer the position and the way each tool placed.<br>rotate 0 degree: location is from aa to eq (Figure 1)<br>rotate 45 degrees (clockwise): location is from fz to jP<br>rotate 90 degrees (clockwise): location is from kY to po<br>rotate 135 degrees (clockwise): location is from qx to uN<br>rotate 180 degrees (clockwise): location is from vW to Am<br>rotate 225 degrees (clockwise): location is from Bv to FL<br>rotate 270 degrees (clockwise): location is from GU to Lk<br>rotate 315 degrees (clockwise): location is from Mt to QJ<br><center><img style='max-width:100%;' src=./data/images/C270-1005-5.jpg></center><br>“If you give me the initial situation and the tools in this string’s order, I can determine whether it is a solution for you.” Somebody says.<br>“Yes, that’s exactly what I want you to do.”<br>This game can be downloaded at <a href=http://www.silverspaceship.com/chromatron/>http://www.silverspaceship.com/chromatron/</a>. I assure you that it’s exactly the same with this problem.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are multiple test cases in the input.<br>First, you’ll get a 15*15 matrix which indicates the initial situation of the table, characters are defined below:<br>We define the fields as:<br>. : Empty grids<br>* : Grids that have walls<br>- : Conduits that only allow the light going left and right<br>| : Conduits that only allow the light going up and down<br>\ : Conduits that only allow the light going top-left and bottom-right<br>/ : Conduits that only allow the light going top-right and bottom-left<br><br>Define laser guns as:<br>W : White laser gun<br>R : Red laser gun<br>G : Green laser gun<br>B : Blue laser gun<br><br>Pinwheel is our target, define them as:<br>r : Red pinwheel<br>g : Green pinwheel<br>b : Blue pinwheel<br>y : Yellow (Red + Green) pinwheel<br>m : Magenta (Red + Blue) pinwheel<br>c : Cyan (Green + Blue) pinwheel<br>w : White (Red + Green + Blue) pinwheel<br>n : Black (You should let no light pass it) pinwheel<br><br><br>Following k (k is the number of laser guns) lines, each line represents the initial direction a laser gun points at. Each line has two integers and a string S, two integers represents the position (x, y) which laser gun is being described. S is “u” (up), “d” (down), “l” (left), “r” (right), “lu” (upper-left), “ld” (bottom-left), “ru” (upper-right) or “rd” (bottom-right).<br><br>Next line, represents the tools we are using, characters are defined below:<br>M : Reflector, or mirror, which reflect the light for 90 degrees or reflect back<br>A : Bender, is an angled reflector, it bends lasers from horizontal and vertical to the diagonals, and vice versa.<br>S : Splitter. If a laser hits a splitter at the correct angle, it bounces off at an angle (act exactly like a mirror) and also goes straight through. If it hits head on, it just goes through. Notice that the splitter is two-sided.<br>D : Doppler. The Doppler turns red beams into green, green into blue, and blue into red-or if you go through it backwards, the opposite. At the beginning, the forward direction is left to right.<br>P : Prism. A prism has two equal short face and a long face, act just like the third picture (Notice that white beam is consists by RGB together), and it reversible and symmetrical.<br>T : Teleporter. The teleporter causes laser beams to jump instantaneously to the next teleporter in the same direction as beam is travelling. If there’s no teleporter in that direction, the beam disappears.<br>1 : Red Filter, that only allows red light go through, if the light is a mixed light that contains red light (like white laser), only red light left after passing (if it can pass through).<br>2 : Green Filter.<br>3 : Blue Filter.<br><br><br>Last line contains the string S as said before.<br>You can be sure that all inputs are legal.<br><br>At beginning, tools are initially placed as below:<br><img style='max-width:100%;' src=./data/images/C270-1005-6.jpg><br> <br>From left to right: A 2 3 1 S M D P<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">If it’s a solution print “Yes”, otherwise print “No”.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">...............
...............
............y..
...............
..r.......c....
...............
...............
W...-.-w-.-b...
...............
.........m.....
...g...........
...............
...............
...............
...............
8 1 r
AAAAA321SS
tJoIHWhNHAcgJnmxhCOx

...............
...............
...............
....g..........
.....b.....g...
......r...b....
.........r.....
G..............
.....r.........
....b...r......
...g.....b.....
..........g....
...............
...............
...............
8 1 ru
MMMMMMMMMMMDD
cpHFIjypclcnHbynphnZoDOyEc

*******W*******
*******.*******
......w........
.*.**.*.*.**.*.
.*...........*.
.*.****.****.*.
.*......w....*.
.*.**.*.*.**.*.
......*w*......
.*.**.*.*.**.*.
.*...........*.
.*.****.****.*.
...***...***...
.*.**.*.*.**.*.
...*r**g**b*...
1 8 d
MMMMAP
NjcAtyiFCddq

.......R.......
...............
...............
...............
...............
...............
...............
.r.T.b.T.r.T.b.
...............
...............
...............
...............
...............
...............
.......B.......
1 8 d
15 8 u
AAAA
DAhKdbxl</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Yes
Yes
Yes
Yes
<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>
Four samples are corresponding to first four pictures.
</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2009+Multi-University+Training+Contest+19+-+Host+by+BNU&source=1&searchmode=source"> 2009 Multi-University Training Contest 19 - Host by BNU </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>