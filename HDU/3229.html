<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Jinyuetuan Puzzle</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3229. Jinyuetuan Puzzle</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：8000/4000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><center><img style='max-width:100%;' src=./data/images/3229-1.jpg></center><br>JinYueTuan is a famous online game which has been in vogue for a long time. Large number of players put themselves in it day after days…<br><br>JinYueTuan is a simple game with these rules:<br>Only seven keys on the keyboard will be used in games, each key are assigned to one of the seven sound tracks. During the game, a series of notes may fall in each sound track irregularly. When notes fall down in one sound track, player should press the assigned key at once. If so, then got a “Cool”, or get “Miss” otherwise.<br><br>There are two types of “Note”: “single note” and “strip note”. Just as the name implies, “single note” means a single note, press right key at the right time once, then you can get a “Cool”, otherwise “Miss”; “strip note” needs you keeping press the corresponding key from the start time to the end time of the note. Press key at the begin time you may get a “Cool”, and release at the end time to get another “Cool”, you will “Miss” either early or late. If “Miss” at the begin time, then “Miss” the other (the end time) immediately.<br><br>People lament about the fact that such an easy game is limited by the hardware design, the so-called “keys confliction”. “keys confliction” means some key combinations cannot be pressed. For example, when Track 1,4,5,6 fall a note at the same time respectively, we should press the four keys at the same time, but now, keys confliction may happen, and cause this to fail, then you will “Miss” all these four notes. Keys confliction meets the relation of inclusion, in other words, if keys set S would cause the confliction, so would keys set T when S is included in T. Note that, if at a certain moment in time, some keys should be pressed and some pressing keys should be released, then you can release and press at the same time, and released keys won’t cause any keys confliction at all.<br><br>Because of the keys confliction, we have to give up some notes to save as more other notes as possible. More details will be explained in the sample data.<br><br>Now you know the falling time and type (single or strip) of each note in each sound track, and all keys-assembling that may cause confliction. Your task is to calculate the maximum number of “Cool” that player can get.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are multiple test cases, the number of them T is given in the very first line, followed by T cases.<br><br>For each test case:<br>First line contains an integer N, the length of the music (1≤N≤1000).<br>The next 7 lines will contain description of each sound track. The first number in each line, C, denote the number of notes in that sound track. Following C description of each note: A single number “A” denotes an single note at Time A(1≤A≤N); A pair of integers separating by ‘-’,”A-B” denotes a strip note start at Time A and end at Time B(1≤A&lt;B≤N). In each sound track, no superposition exists, no strip starts at another’s end time, no single notes puts in a strip(includes begin and end point).<br><br>The next line contain a single integer K (0≤K&lt;2<sup>7</sup>), denotes K descriptions of Keys Confliction are following.<br><br>Each description is a single line containing a string of seven characters S0 S1 S2…S6, if Sk1,Sk2,…,Sks were character ‘1’ and others were ‘0’, that means key combination Sk1Sk2…Sks may cause Keys Confliction.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, output one line containing integer P with case number, the maximum number of “Cool” players can get.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">3
6
3 1 3 4
2 1 2-5
2 3 6
0
0
0
0
1
1110000
6
3 1 3 5
2 1 2-5
2 5 6
0
0
0
0
1
1110000
6
1 1
1 1-3
1 1
0
0
0
0
1
1110000</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 7
Case #2: 8
Case #3: 3</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2009+Asia+Shanghai+Regional+Contest+Host+by+DHU&source=1&searchmode=source"> 2009 Asia Shanghai Regional Contest Host by DHU </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>