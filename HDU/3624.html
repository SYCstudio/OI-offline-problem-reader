<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Digital Calculator</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3624. Digital Calculator</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The Advanced Calculator Machinery (ACM) is going to release a new series of calculators. Like it or not, as a member of ACM, you are asked to develop the software for the new calculator. Here is the detailed technical specification.<br>The general usage of the calculator is that users input expressions, the calculator computes and displays the final result, or error messages if there is something wrong. The expression is in infix notation and the calculator supports following operators:<br><br><center><img style='max-width:100%;' src=./data/images/3624-1.jpg></center> <br>People always make mistakes. When user inputs an invalid expression, the calculator should display an error message, telling user that error occurs. There are totally four possible errors:<br>1. Syntax error: Any kind of syntax error, such as missing operators, redundancy operators and unpaired brackets.<br>2. Divide by zero: The right operand of operator “/” or “%” is zero.<br>3. Integer overflow: At any step of the calculation, any intermediate values go beyond the range of 32-bit signed integers.<br>4. Invalid exponent: The right operand of operator“^” is negative, or both operands are zero (we consider 0^0 undefined).<br>The calculation works this way: at first the calculator omits all space characters of the expression, check the syntax, and then computes. It always finds the highest priority part of the expression, then operators which combines them, then calculate the result and continue the process, until the final result has been got or error occurs.<br>For example, for expression 2^3^(-4*5), there are mainly 5 steps (we use brackets to note every part of the expression):<br>1. Check the syntax, no syntax errors.<br>2. Fetch the highest priority operator 4, no errors.<br>3. Do arithmetic -(4), get result -4, no errors.<br>4. Do arithmetic (-(4))*(5), get result -20, no errors.<br>5. Because operator “^” has right associativity, we do arithmetic (3)^((-(4))*(5)), e.g. (3)^(-20) first. -20 is a negative number, and negative numbers are not allowed as an exponent, so the calculator simply outputs error message and stops.<br>Notes: Because “-“ has two meanings, the calculator will treat it as an unary operation at first,<br>and if it fails, “-“ would be treated as minus operation then.<br>Write a program to simulate the calculator.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The first line of the input file is an integer T&lt;=200, then following T test cases.<br>Each test case has only one line, the input expression given to the calculator. Each expression has no more than 2000 characters.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, output one line contains the case number and the final result or “ERROR!” if any error occurs. See sample for detailed format.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">6
2^(1 2 - 9)^(5%3)
9-8**7
4%(2^0-1)
-5%-3+-5%3
7^--100
(7-3)^(3-7)</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1: 512
Case 2: ERROR!
Case 3: ERROR!
Case 4: -4
Case 5: ERROR!
Case 6: ERROR!</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2010+Asia+Regional+Tianjin+Site+%A1%AA%A1%AA+Online+Contest&source=1&searchmode=source"> 2010 Asia Regional Tianjin Site —— Online Contest </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>