<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Three Kingdoms</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3442. Three Kingdoms</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Three Kingdoms is a funny game. Often Liu Bei is weak and has to run away,so in the game Liu Bei has a skill called &quot;Dunzou&quot;. This time you are playing the role of Liu Bei.As Cao Cao's power is so strong, there is nothing  you can do but escaping. Please select an optimal path to achieve the purpose .<center><img style='max-width:100%;' src=./data/images/3442-1.jpg></center>To simplify the problem, Liu Bei can only move in one of the four direction (up, down,right,left) each time. The map contains the following characters:<br>‘A’ : Representative of watchtower, which has an attack range of  2(measured by Manhattan distance),and an attack damage of 1.<br>‘B’ : Representative of Fort, which has an attack range of 3(measured by Manhattan distance),and an attack damage of 2.<br>‘C’ : Representative of Flame, which has an attack damage of 3 to those who step onto it. <br>‘D’ : Representative of Archer, which has anattack range of 2(measured by Manhattan distance), and an attack damage of 4.<br>‘E’ : Representative of Ordinary soldier, which has anattack range of 1(measured by Manhattan distance), and an attack damage of 5.<br>‘$’ : Representative of Liu Bei.<br>‘!’ : Representative of Destination.<br>'#' : Representative of obstacles<br>‘.’ : Representative of floor.<br>Liu Bei can not enter watchtower, forts, Archers, ordinary soldiers,But he can step onto flame or floor.<br>Some important rules you should note:<br>1.&nbsp;&nbsp;Liu Bei will not be hurt by the same thing twice.For example,if Liu Bei has been hurt by one watchtower before,then he step into the attack range of some watchtower later,he will not be hurt. <br>2.&nbsp;&nbsp;When Liu Bei reach the destination,you should first judge the attack damage at the destination then finish the game.<br>3.&nbsp;&nbsp;You needn’t judge the attack damage at the start position.<br> Please choose a path which LiuBei would cost the least HP.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">In the first line there is an integer T, indicates the number of test cases.(T&lt;=60)<br>In each case,the first line of the input contains two integer n,m(1&lt;=n,m&lt;=50),reperesenting the size of map(n*m).Then follow n lines,each line contain m characters.<br>There may be some blank lines between each case.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case , output “Case d:  “ where d is the case number counted from one.If Liu Bei can reach the destination then output the minimum HP LiuBei may lose, otherwise output -1.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1
4 3
.$.
ACB
ACB
.!.</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1: 6</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2010+ACM-ICPC+Multi-University+Training+Contest%A3%A81%A3%A9%A1%AA%A1%AAHost+by+FZU&source=1&searchmode=source"> 2010 ACM-ICPC Multi-University Training Contest（1）——Host by FZU </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>