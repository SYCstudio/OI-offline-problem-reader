<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Random Inversion Machine</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5404. Random Inversion Machine</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Teacher Mai has a game machine, which has $n$ slots in a row, numbered from $1$ to $n$, inclusively. He plays a game with the machine for several rounds. In each round, he divides that row into $k$ segments with marks at boundaries between adjacent segments. Each segment must contain a positive number of slots. Then, the machine generates a random permutation of $\{1, 2, \cdots , n\}$ and displays the permutation on the slots.Finally, the machine calculates the inversion number of each segment and multiplies them together to get the score of the round. The inversion number of a sequence is the number of inversions (also called inversion pairs) in the sequence.<br><br>Teacher Mai can play the game for as many rounds as he wants, but he must use different partitions in different rounds. Two partitions are considered to be different if there is a mark somewhere in one partition but not in the other. The total game score is simply the sum of the score of each round. However, the machine has been intruded by a malware, which changes the permutation before the machine calculates the score of each round. It sorts the numbers in the $m$ specific slots with numbers $p_1,p_2,\cdots,p_m$.<br><br>For example, if $n=4,k=1,m=2,p=\{1,3\}$ and the permutation generated is $(2,4,1,3)$. The malware will pick numbers $2$ and $1$ and sort them, changing the permutation into $(1,4,2,3)$. So Teacher Mai will get a score of $2$ (pairs $(4,2)$ and $(4,3)$) in this round. Teacher Mai wants to know the maximum expected game score he can get.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are multiple test cases.<br><br>For each test case, the first line contains three numbers $n,k,m(1\leq k,m\leq n\leq 100)$.<br><br>The second line contains $m$ numbers $p_1,p_2,\cdots,p_m(1\leq p_1&lt;p_2&lt;\cdots&lt;p_m\leq n)$.<br><br>In the $i$-th test case, $n=10i$.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">As the answer for the problem can be very large, please calculate it as an irreducible fraction $A/B$ and output $(A*B^{-1})$ mod $(10^9 + 7)$ for each test case in a separate line. Here, $B^{-1}$ is the multiplicative inverse of $B$ modulo $10^9 + 7$. The input constraints guarantee that $B$ and $10^9 + 7$ are coprime, so this expression is properly defined.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">6 2 3
1 4 5
10 3 4
2 6 7 9</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">225000005
608333402</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2015+Multi-University+Training+Contest+9&source=1&searchmode=source"> 2015 Multi-University Training Contest 9 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>