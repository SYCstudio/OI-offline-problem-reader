<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Maze</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5094. Maze</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：100000/100000 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   This story happened on the background of Star Trek.<br><br>   Spock, the deputy captain of Starship Enterprise, fell into Klingon’s trick and was held as prisoner on their mother planet Qo’noS.<br><br>   The captain of Enterprise, James T. Kirk, had to fly to Qo’noS to rescue his deputy. Fortunately, he stole a map of the maze where Spock was put in exactly.<br><br>   The maze is a rectangle, which has n rows vertically and m columns horizontally, in another words, that it is divided into n*m locations. An ordered pair (Row No., Column No.) represents a location in the maze. Kirk moves from current location to next costs 1 second. And he is able to move to next location if and only if:<br><br>   Next location is adjacent to current Kirk’s location on up or down or left or right(4 directions)<br>   Open door is passable, but locked door is not.<br>   Kirk cannot pass a wall<br><br>   There are p types of doors which are locked by default. A key is only capable of opening the same type of doors. Kirk has to get the key before opening corresponding doors, which wastes little time.<br><br>   Initial location of Kirk was (1, 1) while Spock was on location of (n, m). Your task is to help Kirk find Spock as soon as possible.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   The input contains many test cases.<br><br>   Each test case consists of several lines. Three integers are in the first line, which represent n, m and p respectively (1&lt;= n, m &lt;=50, 0&lt;= p &lt;=10). <br>Only one integer k is listed in the second line, means the sum number of gates and walls, (0&lt;= k &lt;=500).<br><br>   There are 5 integers in the following k lines, represents x<sub>i1</sub>, y<sub>i1</sub>, x<sub>i2</sub>, y<sub>i2</sub>, g<sub>i</sub>; when g<sub>i</sub> &gt;=1, represents there is a gate of type gi between location (x<sub>i1</sub>, y<sub>i1</sub>) and (x<sub>i2</sub>, y<sub>i2</sub>); when g<sub>i</sub> = 0, represents there is a wall between location (x<sub>i1</sub>, y<sub>i1</sub>) and (x<sub>i2</sub>, y<sub>i2</sub>),  ( | x<sub>i1</sub> - x<sub>i2</sub> | + | y<sub>i1</sub> - y<sub>i2</sub> |=1, 0&lt;= g<sub>i</sub> &lt;=p )<br><br>   Following line is an integer S, represent the total number of keys in maze. (0&lt;= S &lt;=50).<br><br>   There are three integers in the following S lines, represents x<sub>i1</sub>, y<sub>i1</sub> and q<sub>i</sub> respectively. That means the key type of q<sub>i</sub> locates on location (x<sub>i1</sub>, y<sub>i1</sub>),  (1&lt;= q<sub>i</sub>&lt;=p).</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Output the possible minimal second that Kirk could reach Spock. <br><br>   If there is no possible plan, output -1. <br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4 4 9
9
1 2 1 3 2
1 2 2 2 0
2 1 2 2 0
2 1 3 1 0
2 3 3 3 0
2 4 3 4 1
3 2 3 3 0
3 3 4 3 0
4 3 4 4 0
2
2 1 2
4 2 1</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">14</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014%C9%CF%BA%A3%C8%AB%B9%FA%D1%FB%C7%EB%C8%FC%A1%AA%A1%AA%CC%E2%C4%BF%D6%D8%CF%D6%A3%A8%B8%D0%D0%BB%C9%CF%BA%A3%B4%F3%D1%A7%CC%E1%B9%A9%CC%E2%C4%BF%A3%A9&source=1&searchmode=source"> 2014上海全国邀请赛——题目重现（感谢上海大学提供题目） </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>