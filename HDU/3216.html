<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Graph of Black and White</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3216. Graph of Black and White</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：4000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Once upon a time, there was a graph. Actually, it was an undirected forest, i.e., an undirected graph without circles. There were N nodes in this forest, numbered from 1 to N inclusively, with each node colored black or white. Elves had been living in the forest for many years. Their homes were inside the nodes, and sometimes they would move their homes or visit other elves living in another node. However, they could only move between nodes that were connected by an edge or a path formed by several end-to-end connected edges. In other words, they could only move in the same tree. If two nodes were not connected, the elves could not travel between them. When they were passing a node, including the starting and the ending ones, they should use black or white magic power according to the color of the node. Waste is criminal, so during a journey the elves never pass a node twice. <br><br>The structure of the forest might change, when no elves were travelling. Two disconnected nodes might be connected by a new edge between them, or an existing edge might disappear, or the color of a node might change. Anyway, there would never be circles in the forest, so the forest remained a forest. <b>THUS HARMONY LONG LASTS!</b><br><br>Elves were intelligent. They knew everything happening in the forest. And they knew how much black and white magic power was used when they travel. Why? Because YY, the most intelligent one elf, simulated everything and told them.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Input contains several test cases.<br><br>For each test case, the first line contains two positive integers, N (N ≤ 10000) and M (M ≤ 100000), indicating the number of nodes in the graph and the number of operations that YY should simulate. At the beginning of his simulation, there were not any edge in the forest.<br><br>The following lines contains N space separated characters, each being ‘B’ or ‘W’ (quotes for clarity), the ith of which indicates the color of the node numbered i, black or white.<br><br>M lines follow, indicating the M operations to simulate. For each line, it will be one of the four types:<br><br>add u v<br>The two nodes numbered u and v (1≤u, v≤N, and u≠v) are connected by a new edge. It is guaranteed that these two nodes are not connected before this operation.<br><br>del u v<br>The edge between the two nodes numbered u and v (1≤u, v≤N, and u≠v) disappears. It is guaranteed that this edge exists before this operation.<br><br>set u c<br>The color of the node numbered u (1≤u≤N) is set to c (c=’B’ or ‘W’, quotes for clarity).<br><br>query u v<br>Now YY tells the elves the number of black and white nodes that have to be passed when travelling between nodes numbered u and v (1≤u, v≤N) inclusively, or tells them the journey is impossible. <br><br>Input ends with N=M=0.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each query in each test case, if such a journey is possible, output one line with two space-separated integers, the number of black and white nodes on the path between the two nodes. If it is impossible, just output one line containing the number -1.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">3 8
B W B
query 1 2
add 1 2
add 2 3
query 1 3
del 2 3
add 1 3
set 1 W
query 3 2
0 0</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">-1
2 1
1 2</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2009+Shanghai+Network+Contest+Host+by+DHU&source=1&searchmode=source"> 2009 Shanghai Network Contest Host by DHU </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>