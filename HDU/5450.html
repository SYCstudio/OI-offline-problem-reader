<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Traversal</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5450. Traversal</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：3000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：65535/102400 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> In this city, all the parks are labelled with integers from $1$ to $n$ except for $k$ integers: $a_1$, $a_2$, $...$, $a_k$. Different parks have different integers as identities. With the development of transport, more and more express lanes appear in this city. Two parks have an express lane between them if the difference between their identities is 1 or p or p+2.<br><br>    When Mr. Wu first came to this city, he decided to visit all the parks by taking some circular tourist routes for several days. A circular tourist route is a loop route with at least three parks. For each two adjacent parks in this circular order, there exists an express lane between them.<br><br>    Mr. Wu planed to visit each park only one time. The problem is: how many different plans are there to design the route. Two plans are different if and only if they have some different circular routes. Note that the translation and inversion provide the same circular tourist routes as the original route.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> There are multiple test cases (no more than $20$ test cases), and the first line contains an integer $t$, meaning the total number of test cases.<br><br>    For each test case, the first line contains two integers $n$ and $p$, where $1 \le n \le 100, 2 \le p \le 9$. The second line contains $k+1$ integers. The first integer is $k$, where $k &lt; n$. And $k$ integers follow, $a_1$, $a_2$, $...$, $a_k$.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, print one line containing the total number of plans modulo $10007$.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4
6 3
0
6 2
0
5 3
1 5
6 3
3 2 5 3</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 6
Case #2: 10
Case #3: 1
Case #4: 0
<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>
All the plans in the first test case are:
        (1, 2, 3, 4, 5, 6) 
        (1, 2, 3, 6, 5, 4) 
        (1, 2, 5, 4, 3, 6) 
        (1, 2, 5, 6, 3, 4) 
        (1, 4, 3, 2, 5, 6) 
        (1, 4, 5, 2, 3, 6)
All the plans in the second test case are:
        (1, 2, 3, 4, 6, 5) 
        (1, 2, 4, 6, 5, 3) 
        (1, 2, 6, 4, 3, 5) 
        (1, 2, 6, 4, 5, 3) 
        (1, 2, 6, 5, 4, 3) 
        (1, 3, 2, 4, 6, 5) 
        (1, 3, 2, 6, 4, 5) 
        (1, 3, 4, 2, 6, 5) 
        (1, 2, 3), (4, 5, 6) 
        (1, 3, 5), (2, 4, 6)
</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2015+ACM%2FICPC+Asia+Regional+Shenyang+Online&source=1&searchmode=source"> 2015 ACM/ICPC Asia Regional Shenyang Online </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>