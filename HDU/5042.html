<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>GCD pair</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5042. GCD pair</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：16000/8000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   The greatest common divisor (gcd) of two or more integers (at least one of which is not zero) is the largest positive integer that divides the numbers without a remainder.<br><br>   Now I will give you a simple problem about gcd again. <br><br>   Given a sequence of N integers, A = {a<sub>1</sub>, a<sub>2</sub>, ..., a<sub>N</sub> }.<br><br>   For every pair of &lt; l, r &gt;( 1 ≤ l ≤ r ≤ N ), defined a function F (l, r) = gcd(a<sub>i</sub>)( l ≤ i ≤ r ) that is the greatest common divisor of all the integers in the subsequence {a<sub>l</sub>, a<sub>l+1</sub>, ..., a<sub>r</sub> }<br><br>   Obviously, There are N * (N + 1)/2 pair of &lt; l, r &gt;( 1 ≤ l ≤ r ≤ N ). We can get the rank of pair &lt; l, r &gt; through the following code.<br><br><b><br>1  pair&lt;int,int&gt; get_RANK(int l,int r) <br>2  {<br>3        map&lt;int,int&gt;mp;<br>4        int k1 = 1, k2 = 1;<br>5        for(int i = 1;i &lt;= N;i++)<br>6            for(int j = i;j &lt;= N;j++)<br>7&nbsp;&nbsp;      {<br>8&nbsp;&nbsp;        if(i == l &amp;&amp; j == r)continue;<br>9&nbsp;&nbsp;        if(F(i,j) &lt; F(l,r))<br>10&nbsp;&nbsp;        {<br>11&nbsp;&nbsp;            if(mp.find(F(i,j)) != mp.end())continue;<br>12&nbsp;&nbsp;            k1++;<br>13&nbsp;&nbsp;            mp[F(i,j)] = 1;<br>14&nbsp;&nbsp;        }<br>15&nbsp;&nbsp;        else if(F(i,j) == F(l,r))<br>16&nbsp;&nbsp;        {<br>17&nbsp;&nbsp;&nbsp;&nbsp;       if(i &lt; l || (i == l &amp;&amp; j &lt; r))k2++; <br>18&nbsp;&nbsp;        }<br>19&nbsp;&nbsp;      }<br>20&nbsp;&nbsp;      return make_pair(k1,k2);<br>21  }<br><br>(If you don’t know C++, what a sad story! Sorry!)<br></b><br><br>   There are Q queries, you need to answer the following two queries:<br><br>   ●  SELECT k1 k2: ask for the pair &lt; l, r &gt; which is rank &lt; k<sub>1</sub>, k<sub>2</sub> &gt;.If there is no such pair output -1.<br><br>   ●  RANK l r: ask for the rank &lt; k<sub>1</sub>, k<sub>2</sub> &gt; of the pair &lt; l, r &gt;</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   The first line of the input is T (1 ≤ T ≤ 10), which stands for the number of test cases you need to solve.<br><br>   The first line of each case contains two integers N ,Q (1 ≤ N, Q ≤10<sup>5</sup>),denoting the number of integers and queries, respectively.<br><br>   The second line contains N integers, a<sub>1</sub>, a<sub>2</sub>, ..., a<sub>N</sub> (1 ≤ a<sub>i</sub> ≤ 10<sup>5</sup>).<br><br>   For the next Q lines, contain instructions “SELECT k<sub>1</sub> k<sub>2</sub>” or “RANK l r” (1 ≤ k<sub>1</sub>, k<sub>2</sub> ≤ N * (N + 1)/2,1 ≤ l ≤ r ≤ N ),</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   For each test case, print a line “Case #t:”(without quotes, t means the index of the test case) at the beginning.<br><br>   For each query, output the answer.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1
3 6
6 2 4
RANK 1 1
SELECT 3 1
RANK 2 3
SELECT 2 2
SELECT 1 3
SELECT 1 4</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1:
3 1
1 1
1 4
-1
2 2
2 3</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014+ACM%2FICPC+Asia+Regional+Shanghai+Online&source=1&searchmode=source"> 2014 ACM/ICPC Asia Regional Shanghai Online </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>