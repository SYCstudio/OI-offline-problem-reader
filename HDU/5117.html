<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Fluorescent</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5117. Fluorescent</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：3000/3000 MS (Java/Others)</span> <span class="ui label">时间限制：512000/512000 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Matt, a famous adventurer who once defeated a pack of dire wolves alone, found a lost court. Matt finds that there are N fluorescent lights which seem to be the stars from the firmament. What’s more, there are M switches that control these fluorescent lights. Each switch is connected to a group of lights. When Matt touches a switch, all the lights connected to it will change their states (turning the dark on, turning the bright off).<br><br>   Initially, all the fluorescent lights are dark. For each switch, Matt will touch it with probability 1 .<br><br>   As a curious gentleman, Matt wants to calculate E[X3], where X represents the number of bright lights at the end, E[X3] represents the expectation of cube of X.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   The first line contains only one integer T , which indicates the number of test cases.<br><br>   For each test case, the first line contains N, M (1 ≤ N, M ≤ 50), denoting the number of fluorescent lights (numbered from 1 to N ) and the number of switches (numbered from 1 to M ).<br><br>   M lines follow. The i-th line begins with an integer Ki (1 ≤ K<sub>i</sub> ≤ N ). K<sub>i</sub> distinct integers l<sub>ij</sub>(1 ≤ l<sub>ij</sub> ≤ N ) follow, denoting the fluorescent lights that the i-th switch controls.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   For each test case, output a single line “Case #x: y”, where x is the case number (starting from 1) and y is the answer. To avoid rounding error, the answer you should output is:<br><br><center><b>E[X<sup>3</sup>] × 2<sup>M</sup> mod (10<sup>9</sup> + 7)</b></center></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2
2 2
1 1
2 1 2
3 1
3 1 2 3</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 10
Case #2: 27

<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>For the first sample, there’re 4 possible situations:
All the switches is off, no light is bright, X^3 = 0.
Only the first switch is on, the first light is bright, X^3 = 1.
Only the second switch is on, all the lights are bright, X^3 = 8.
All the switches is on, the second lights are bright, X^3 = 1.
Therefore, the answer is E[X^3] × 2^2 mod (10^9 + 7) = 10.

For the second sample, there’re 2 possible situations:
The switches is off, no light is bright, X^3 = 0.
The switches is on, all the lights are bright, X^3 = 27.
Therefore, the answer is E[X^3] × 2^1 mod (10^9 + 7) = 27.
</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014ACM%2FICPC%D1%C7%D6%DE%C7%F8%B1%B1%BE%A9%D5%BE-%D6%D8%CF%D6%C8%FC%A3%A8%B8%D0%D0%BB%B1%B1%CA%A6%BA%CD%C9%CF%BD%BB%A3%A9&source=1&searchmode=source"> 2014ACM/ICPC亚洲区北京站-重现赛（感谢北师和上交） </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>