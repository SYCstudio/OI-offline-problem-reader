<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>The irRegularGame of Life</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3945. The irRegularGame of Life</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：4000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The irRegularGame of Life(http://www.bilibili.tv/video/av94917/) is an interesting game, it’s based on the same cell rules as Conway's original, with the addition of limitations on initial conditions, and goals for completing levels.<br><br>The Conway’s original game of life rules is a &quot;2-Dimensional cellular automaton&quot;. It was invented by British mathematician John Conway in 1970.It is not a game in the video game sense, but consists of a 2-D grid of cells. The game of life shouldn't to be confused with Milton Bradley's Board game of the same name.<br>Cells in the grid follow a few simple mathematical rules that determine whether they will live, die or multiply in the next generation. <br>Specifically, each cell interacts with its 8 horizontal, vertical, and diagonal neighbours, according to these 4 simple rules below:<br>1. Any live cell with fewer than 2 live neighbours dies through loneliness.<br>2. Any live cell with more than 3 live neighbours dies through overcrowding.<br>3. Any live cell with 2 or 3 live neighbours lives to the next generation.<br>4. Any dead cell with exactly 3 live neighbours comes to live. <br><center><img style='max-width:100%;' src=./data/images/C363-1006-1.jpg></center> <br>Despite having such simple rules, the patterns that evolve are remarkable and can vary greatly from only small differences in initial conditions. <br>The game of life has fascinated mathematicians, computer scientists and nerdy types for decades. <br><center><img style='max-width:100%;' src=./data/images/C363-1006-2.jpg></center> <br>This picture shows the rule of The irRegularGame of Life.<br><br>Sakuya thought this game is too simple, so he added some rules.<br>1.We have K (1&lt;=K&lt;=10) independent boxes in every level, and each box contains 4*4 grids.<br>2.The goal to pass a level is the sum of live cells in all boxes are exactly N (0&lt;=N&lt;=20) after T (0&lt;=T&lt;=200000) generations.<br>3.For those boxes, we can add at most M (0&lt;=M&lt;=20) cells.<br><br>Sakuya want know how many ways to pass one level?<br><br>As an example, initially we have one box as below.<br><img style='max-width:100%;' src=./data/images/C363-1006-3.jpg><br>The goal is to have exactly 5 live cells after 10 generations, and we can add at most one cell into the box.<br>There are 9 different ways to pass this level.<br><center><img style='max-width:100%;' src=./data/images/c363-1006-4.jpg></center> </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">First an integer L (L &lt;= 50), indicates there are L different levels.<br>For every level, the first line contains 4 integers, they are K, M, T and N which mentioned above.<br>Then, there are K 4*4 01-matrices follow, indicating the initial state of each box, 0 stands for an empty cell and 1 stands for an alive cell.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each level, you should output &quot;Case #C: &quot; first, where C indicates the level number and counts from 1. Then output the answer. There may be a great deal of ways, just mod 1000000009</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2

1 1 10 5
0 0 0 0
0 1 0 0
1 0 1 0
0 1 0 0

2 3 0 3
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 9
Case #2: 4960
<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>
ATTENTION: It is to ALL the box that at most M cells are available to be add into, not to EACH box. 
In the second sample, we can add 3 cells into two empty boxes and the goal is the sum of live cells in all boxes are exactly 3 after 0 generation, so we have C(32,3) = 4960 different ways.
</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2011+Multi-University+Training+Contest+11+-+Host+by+UESTC&source=1&searchmode=source"> 2011 Multi-University Training Contest 11 - Host by UESTC </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>