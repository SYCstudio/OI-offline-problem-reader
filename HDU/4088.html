<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Healing</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4088. Healing</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Do you know the popular game World Of Warcraft (WOW) made by Blizzard? Tom plays a Blood Elf Paladin in WOW. The Paladins have 3 kinds of talent trees: Holy, Protection and Retribution.<br>The Holy Paladins in a team are healers, who provide healing service, heal the wounded; the Protection Paladins in a team are tanks, who attract the enemy's fire and protect the teammates; the Retribution Paladins in a team are melee damage dealers.<br>After the version Cataclysm is published, the Retribution Paladins are found weakened by Blizzard. But fortunately, the Holy Paladins become more and more powerful amount the healers.<br>In order to join the dungeons and raids easier, Tom choose the talent of Holy to be his role's main talent (because the dungeons and raids are lack of healers). What a nice job the Holy Paladin is! Instead of standing in front of the monsters and enduring the hit, the only thing the Holy Paladins should do is to heal teammates and hardly worry about the monsters would attack them.<br>Unlike the Retribution Paladins' operation of &quot;Keyboard Rolling&quot;, the Holy Paladins have many spells to use of healing, so that some part of the pressing of some spells would be overlapping with each other. Furthermore, once a spell was cast successfully, it would possibly lead to casting one spell easily, that means you can get a buff which would allow you cast one spell in another way (The spell the buff effects can be anyone he can cast).<br>It is high-operation-frequency when in the dungeons, so Tom can hardly notice whether he cast a spell successfully or how much he had healed. And Tom really wants to know that, so he turns to you for a favor, asks you to write an Add-On which can help him record the total healing points and which spell brings higher total healing points.<br>About the spells:<br>Each spell has a distinct name.<br>Spell needs Mana Points(MP). You cannot cast the spell when there is not enough mana.<br>Spell has Cool Down Time. Once you cast a spell successfully, you cannot cast the same spell during the next Cool Down Time.<br>If you fail to cast a spell, the keys you have pressed can be the prefix of the next spell.<br>If spell-2 is the suffix of spell-1, then spell-1 is priority.<br>No two spells can be cast in same moment.<br>Some spells will lead to some buffs(described above) so that when you press some other keys sequences, you will cast some spells, too. Notice that the buff will exist until you cast the exact spell successfully, no matter you use the buff or not. (In other word, if you get the buff of spell A, then you don't use the buff but cast the spell A, the buff of spell A will disappear.)<br>One spell will immediately be cast once it fits the spell condition.<br>Besides, the Holy Paladins have a talent called Meditation, which will regenerates one mana every second. Meditation will regenerate MP immediately when one second starts. And Tom can press 5 keys every second.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are no more than 20 test cases, end by EOF.<br>In each test case:<br>First line contains 2 integers N (0&lt;N&lt;=10000) and MP (0&lt;=MP&lt;=100000), indicating there will be N spells and you have MP Mana Points at the beginning and you can have MP Mana Points at most.<br>Then follows N lines:<br>Each line contains Spell Name, Spell Press Key Sequence, Spell Mana Cost(MC), Spell Healing Points(HP), and Spell Cool Down Time(CD). The Spell Name is no more than 50 characters; Spell Press Key Sequence is no more than 20 characters and all the characters are capital letters; -MP&lt;=MC&lt;=MP, the spell will regenerate manas if the MC is negative;<br>0&lt;=HP&lt;=100000; 0&lt;=CD&lt;=1000, notice that here the CD is base on 0.2 second, (For example: If CD=5, then the Spell Cool Down Time is 1 second).<br>Then follow integer M (M+N&lt;=10000), indicates the buffs may appear.<br>Then M lines follow:<br>Each line contains Spell-1 Name, Spell-2 Name, Spell-2's Another Press Key Sequence, which means when you cast Spell-1, you can get the buff of Spell-2, the effect of the buff is Spell-2's Another Press Key Sequence. The Spell-1 Name and Spell-2 Name is the Spell Name appear in the N lines, Spell-2's Another Press Key Sequence is no more than 20 characters and all the characters are capital letters.<br>The last line is Tom's press sequence, the length is no longer than 500000 and all the characters are capital letters.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each case, please output :<br>Case X:<br>The Total Healing Point is Y.<br>Then several lines follow(3 lines at most):<br>The first line contains the information of the spell with highest total healing points; the second line contains information of the spell with second highest; and the third line contains the third highest. The informations contains Spell Name, Total Spell Healing Points, Spell times. Indicate the spell's name, spell's total healing points and how many times the spell had been cast. If the total Healing Points is equal then compare with the times who was cast most, if it still the same, then ordered by the Lexicographic order. If there is less than 3 spells, output the rest.<br>(Here X is the case number, Y is the total Healing Points)<br>If Y is not positive, just print the following text instead:<br>Case X:<br>No Healing Spell!<br>Print a blank line between test cases.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">3 10
HolyShock ASDF 5 10 3
Judgements SDFG -10 0 10
LightsOfDawn DFGH 10 25 10
2
HolyShock Judgements G
Judgements LightsOfDawn H
ASDFSDFGH

1 10
WordOfGlory A 1 10 1
0
AAAAAAAA

1 1
HolyLight A 1 10 1
0
AAAAAAAAAA</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1:
The Total Healing Point is 35.
LightsOfDawn 25 1
HolyShock 10 1

Case 2:
The Total Healing Point is 40.
WordOfGlory 40 4

Case 3:
The Total Healing Point is 20.
HolyLight 20 2</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2011+Asia+Beijing+Regional+Contest+&source=1&searchmode=source"> 2011 Asia Beijing Regional Contest  </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>