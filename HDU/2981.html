<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Shoot Your Gun!</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU2981. Shoot Your Gun!</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：4000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are two rectangular polygons (simple polygons with interior angles of only 90 or 270 degrees) G  and T , inside another rectangular polygon M . You can place a gun anywhere on the boundary of G , then shoot a bullet in one of four diagonal directions, and then touch the boundary of T . You may shoot across an edge of T , but touching only a corner is also allowed. Your bullet is not allowed to touch G  again (even touching a corner of G  is not allowed), before touching T .<br><br><center><img style='max-width:100%;' src=./data/images/con216-1007-1.JPG></center><br><br>The edges of M can reflect the bullet. When the bullet touches a vertex of M , it may simply go through it (and not regarded as a reflection), or go back. These special cases are shown in the figure above.<br><br>Write a program to find the minimal number of reflections needed from G to T . </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The input contains several test cases. The first line of each case contains three positive integers nG, nT, nM  (4&lt;=nG, nT, nM&lt;=50) . The next line contains nG  pairs of integers, the coordinates (non-negative integers not greater than 4000) of the vertices of G , in counter-clockwise order. The next two lines describe polygon T  and M , in the same format. It is guaranteed that G  and T  are outside each other (their boundaries will not touch), and are both inside M  (they do not touch the boundary of M ). The last test case is followed by a single zero, which should not be processed. </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, print the case number and the minimal number of reflections to touch T . If it's impossible, output `-1'. </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4 4 12 
1 4 2 4 2 5 1 5 
6 4 7 4 7 5 6 5 
0 3 3 3 3 0 4 0 4 3 8 3 8 6 4 6 4 5 3 5 3 7 0 7 
4 4 4 
1 1 2 1 2 2 1 2 
3 1 4 1 4 2 3 2 
0 0 5 0 5 3 0 3 
4 4 4 
1 1 2 1 2 2 1 2 
6 1 7 1 7 2 6 2  
0 0 8 0 8 3 0 3
0</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1: 2 
Case 2: 0 
Case 3: 1</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2007+Asia+Regional+Beijing+&source=1&searchmode=source"> 2007 Asia Regional Beijing  </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>