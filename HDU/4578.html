<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Transformation</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4578. Transformation</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：15000/8000 MS (Java/Others)</span> <span class="ui label">时间限制：65535/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Yuanfang is puzzled with the question below: <br>There are n integers, a<sub>1</sub>, a<sub>2</sub>, …, a<sub>n</sub>. The initial values of them are 0. There are four kinds of operations.<br>Operation 1: Add c to each number between a<sub>x</sub> and a<sub>y</sub> inclusive. In other words, do transformation a<sub>k</sub>&lt;---a<sub>k</sub>+c, k = x,x+1,…,y.<br>Operation 2: Multiply c to each number between a<sub>x</sub> and a<sub>y</sub> inclusive. In other words, do transformation a<sub>k</sub>&lt;---a<sub>k</sub>×c, k = x,x+1,…,y.<br>Operation 3: Change the numbers between a<sub>x</sub> and a<sub>y</sub> to c, inclusive. In other words, do transformation a<sub>k</sub>&lt;---c, k = x,x+1,…,y.<br>Operation 4: Get the sum of p power among the numbers between a<sub>x</sub> and a<sub>y</sub> inclusive. In other words, get the result of a<sub>x</sub><sup>p</sup>+a<sub>x+1</sub><sup>p</sup>+…+a<sub>y</sub> <sup>p</sup>.<br>Yuanfang has no idea of how to do it. So he wants to ask you to help him. <br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are no more than 10 test cases.<br>For each case, the first line contains two numbers n and m, meaning that there are n integers and m operations. 1 &lt;= n, m &lt;= 100,000.<br>Each the following m lines contains an operation. Operation 1 to 3 is in this format: &quot;1 x y c&quot; or &quot;2 x y c&quot; or &quot;3 x y c&quot;. Operation 4 is in this format: &quot;4 x y p&quot;. (1 &lt;= x &lt;= y &lt;= n, 1 &lt;= c &lt;= 10,000, 1 &lt;= p &lt;= 3)<br>The input ends with 0 0.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each operation 4, output a single integer in one line representing the result. The answer may be quite large. You just need to calculate the remainder of the answer when divided by 10007.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">5 5
3 3 5 7
1 2 4 4
4 1 5 2
2 2 5 8
4 3 5 3
0 0</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">307
7489</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2013ACM-ICPC%BA%BC%D6%DD%C8%FC%C7%F8%C8%AB%B9%FA%D1%FB%C7%EB%C8%FC&source=1&searchmode=source"> 2013ACM-ICPC杭州赛区全国邀请赛 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>