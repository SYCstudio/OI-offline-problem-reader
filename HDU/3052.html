<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Vim</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3052. Vim</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：65535/65535 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Vim is a text editor which developed from vi. Due to its powerful function in code complete, compile, and error jump, it’s widely used by programmers. The same as Emacs, it’s the most popular text editor among users of UNIX. As such an excellent text editor, Vim has various of orders. Now, we’re asking you to write a program that simulates Vim’s replace order.<br><br>The format of Vim’s replace order is ([] means optional, {} means necessary) :<br><br>    :[range]s/{pattern}/{string}/[flag]<br><br>In the order above,<br><br>‘:’ means the start of a replace order,<br><br>[range] indicates the range of the order, that is, the order works in which lines.<br><br>‘s’ is short for substitute.<br><br>{pattern} and {string} represent the string to match and replace to, respectively.<br><br>‘/’ is used to mark the beginning and ending of {pattern} and {string}.<br><br>{flag} is used to open or close some options.<br><br>{range} is often two integers separated by a comma, indicating the start line and end line’s line number.<br><br>For example, “4,8” means from line 4 to line 8 (including line 4, line 8). Line number starts from 1. You can also use a ‘%’ to represent all lines.<br><br>(Additional, Vim provides many more flexible formats. Such as, bypassing a number means the line cursor stays, ‘$’ means the last line of the text. So, “,$” means from the line cursor stays to the last line. )<br><br>{pattern} and {string} both support regular expression (if you haven’t ever heard of it, go to Google for help). If {pattern} is empty, the {pattern} of the last replace order will be used.<br><br>Obviously, ‘/’ can’t be included in {pattern} and {string}. So, an additional escape character ‘\’ is used. For example, if you want to replace “&lt;br&gt;” to “&lt;br/&gt;”, you cannot write:<br><br>    :%s/&lt;br&gt;/&lt;br /&gt;/g<br><br>Instead, you should write:<br><br>    :%s/&lt;br&gt;/&lt;br \/&gt;/g<br><br>If there’re too many ‘/’s in the expression, (for instance, &quot;file:///usr/share/man/man1/vim.1.gz&quot;), it will become troublesome. So, people think of a solution, that is, use another character as the separator (the first character after ‘s’ is always treated as the separator). For example, when using ‘+’ as the separator, the order above can be written this way:<br><br>    :%s+&lt;br&gt;+&lt;br /&gt;+g<br><br>There’re many kinds of [flag]. ‘g’ means replace every time it matches. Without a ‘g’, it will only replace the first matching string. For example:<br><br>    #include &lt;stdio.h&gt;<br><br>Execute the order bellow:<br><br>    :%s/i//g<br><br>Result is:<br><br>    #nclude &lt;stdo.h&gt;<br><br>While executing this order bellow:<br><br>    :%s/i//<br><br>Result is:<br><br>    #nclude &lt;stdio.h&gt;<br><br>Other flags including: ‘c’ indicates a confirm is required before every replacement, ‘i’ indicates case insensitive.<br><br>Here comes a problem, what if you want to replace “a” to “aa”? Somebody may doubt that it will go to an endless loop, but in fact, it won’t. Because there is a rule that, in a replacement, the replaced characters can’t be replaced again. So, if you want to replace “a” to “aa”, it’s in fact that every successive “a” string is doubled in length.<br><br>To simplify the problem, we make some appointments:<br><br>1.       [range] must appear, in the form of “%” or “a,b” (a, b are both integers, and a&lt;=b)<br><br>2.       {pattern} and {string} are both consist of characters, numbers, spaces and “_” (not including any separator below, so an escape character is not needed)<br><br>3.       You can choose one of these characters as the separator: /~!@#$%^&amp;*()-+=<br><br>4.       [flag] is always a “g”<br><br>A big example:<br><br>Original text:<br><br>    If the Tao is greet, then the operating system is greet.<br><br>    If the operating system is greeter, then the compiler is greet.<br><br>    If the compiler is greeter, then the applications is greet.<br><br>    The user is pleased and there is harmony in the world.<br><br>Replace order:<br><br>    :[1,4]s/greet/great/g<br><br>Or:<br><br>    :%s+greet+great+g<br><br>Either will replace the original text to:<br><br>    If the Tao is great, then the operating system is great.<br><br>    If the operating system is greater, then the compiler is great.<br><br>    If the compiler is greater, then the applications is great.<br><br>    The user is pleased and there is harmony in the world.<br><br>Please write a program to simulate this simplified vim replace order.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The input will consist of one case.<br><br>The first line will be a positive integer L (L &lt;= 100), specifying the number of lines to be processed. Then L lines of text are given. Each line has no more than 100 characters. <br><br>After that, several pieces (&lt;= 50) of replace orders are given (one per line). It is ensured that any line of text will never have more than 100 characters during the replacement.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">After the execution of every replace order, output the line number and content of the lines that have been replaced, order by line number from small to big. In each line, first output the line number, which has a width of 4 characters, right-aligned, then 2 spaces, then the text after replacement.<br><br>If any order replaced nothing, output &quot;Pattern not found&quot;.<br><br>Output a blank line between any two replace order’s result. </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4
If the Tao is greet, then the operating system is greet.
If the operating system is greeter, then the compiler is greet.
If the compiler is greeter, then the applications is greet.
The user is pleased and there is harmony in the world.
:1,3s/greet/great/g
:%s//great/g </code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">   1  If the Tao is great, then the operating system is great.
   2  If the operating system is greater, then the compiler is great.
   3  If the compiler is greater, then the applications is great.

Pattern not found </div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2009+Multi-University+Training+Contest+15+-+Host+by+BUAA&source=1&searchmode=source"> 2009 Multi-University Training Contest 15 - Host by BUAA </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>