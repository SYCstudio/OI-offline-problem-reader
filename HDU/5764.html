<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>After a Sleepless Night</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5764. After a Sleepless Night</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The yearly Multi-University Training Contest is coming, and ?? had already prepared an interesting and challenging problem for all those intelligent brains. However, when he told teammates about his “wonderful idea”, it really shocked him that all of them, except himself, had already seen an existing problem with the same trick.So he need to rack his brain again.<br>But nothing is difficult for a willing heart. After thinking about it all through the night, he came up with a new problem: <br>The original rooted tree has n nodes, numbered from 1 to n. Each node has a value, all of these values form a permutation of [1,n]. We reset these values by the following way: <br><br>new value(P) = max{previous value(Q)|Q is in the subtree with root P}<br><br> Given the new tree(each node’s number, it’s neighbors and it’s value), your job is to restore its original appearance.<br><b> Note that the  root of the given tree is unspecified.</b><br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">First line gives the number of test cases T. <br>Each cases begins with n(the number of nodes).Next line gives n integers, the i’th integers means i-th node’s value. Then n-1 lines, each line has two integers a and b, describes the edge connecting node a and node b..<br>T&lt;=20, 1&lt;=n&lt;=100000. All node’s values are in range [1,n]. The given edges construct a tree of nodes 1 to n.Sum of n in all cases&lt;=200000.<br>There may be blank lines before each case. <br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, first output &quot;Case #x: &quot;.If it’s impossible to restore the original tree, output “Impossible”. Otherwise, output original values of nodes 1,2,...n in order, separated by spaces.If there exist multiple answers, the lexicographically smallest one is needed.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2

2
2 2
1 2

3
3 1 2
1 2
2 3</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case #1: 1 2
Case #2: Impossible

<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>
<b>In first case, both nodes can be chosen as the root. If we choose node 1, its value must be 1, and node 2 have value 2. So the answer is ”1 2”.
In the second, by enumerating all situations, we can easily find that there is no proper original tree.
</b>
</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2016+Multi-University+Training+Contest+4&source=1&searchmode=source"> 2016 Multi-University Training Contest 4 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>