<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Hello, Your Package!</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4922. Hello, Your Package!</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：5000/2500 MS (Java/Others)</span> <span class="ui label">时间限制：262144/262144 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Package delivery is really a tiring work. I’m spending all day on the roads, crossing bridges and highways through the city, and visiting various people in different buildings. Anytime someone asks me if I’m busy, stressed or overworked and the answer will likely be an emphatic yes.<br><br>   But I have my experience in my job. At the beginning of the day, I arrive at the company and receive the packages of today’s work. Before I set out to deliver them, I have to carefully consider which package should be sent first and which way I should go. It’s really a heavy headache for me.<br><br>   The city consists of totally M two-way roads, <b>each of which is a straight segment line or a circle.</b> A straight one contains two endpoints that can be denoted as A<sub>i</sub>(x<sub>iA</sub>,y<sub>iA</sub>) and B<sub>i</sub>(x<sub>iB</sub>,y<sub>iB</sub>) on a two-dimensional map, while a circle-shaped road should be expressed as a centre point O<sub>i</sub>(x<sub>i</sub>,y<sub>i</sub>) and its radius Ri. Roads may cross with others (even on the endpoint), but no two roads will overlap. The coordinates and radius are measured in centimetre (cm) and the scale of the map is <b>1: 100000.</b> That is, two locations with actual distance of 1 kilometre (km) will be 1cm apart on the map. Further more, roads are not neccessarily connected in the city.<br><br>   My company locates at (C<sub>x</sub>,C<sub>y</sub>) on the map. As I said before, I will occur there at the beginning of the day. When I set out from somewhere and leave for the next destination, I have two choices: on foot, or by taxi (don’t laugh at me anyway). My walking speed keeps at V<sub>walk</sub> km/h and it won’t change. However, car speed limit differs on every road due to the different traffic situations. Cars can only run along the roads rather than other areas, while walking is of no constraints.<br><br>   If I choose to walk to the next destination, I go there directly along a straight line from start to target and will not stop on the way. But taking a taxi is a little bit complicated. Firstly I’ll choose a road, and walk to <b>the nearest position from me on that road</b>. If there’s a tie, all candidates are available. After waiting for a taxi for T<sub>wait</sub> minutes, I step on a taxi at that position and choose a road as my target. The car will run along the roads and send me to the target road, and I’ll get off the taxi at the nearest location to the destination on that road. Finally, I walk from where I get off the taxi along a straight way to the destination, and will not take another taxi any more (even it might be faster, but it costs money for me). Because of my urgent demands, the taxi always runs at limit speed on every specific road. But the taxi drivers are not well enough - I have to determine the way myself to prevent being ripped off.<br><br>   N packages’ destinations spread all over the city. The ith package’s destination locates at P<sub>i</sub>(x<sub>i</sub>,y<sub>i</sub>) which may occur at any corner of the city except on any roads. Besides, there’s an urgency degree for each package, denoted by U<sub>i</sub>. Customers are always troubles, and hence my mission is certainly to try my best minimizing their dissatisfaction.  If Package i arrives at the destination by t<sub>i</sub> minutes since I set off from the company, the specific customer’s dissatisfaction should be U<sub>i</sub> * t<sub>i</sub>.<br><br>   I’m going to minimize the sum of all dissatisfactions. How should I determine the order of deliveries and the tour plan to accomplish the mission?<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   The input contains several test cases. The number of test cases T (T&lt;=10) occurs in the first line of input.<br><br>For each test case:<br>   The first line contains N , M , V<sub>walk</sub> and T<sub>wait</sub>.<br>   The following line gives the company’s coordinates C<sub>x</sub>,C<sub>y</sub> .<br> <br>   The following N lines describe the packages, where the ith line contains x<sub>i</sub>,y<sub>i</sub>,U<sub>i</sub>, indicating that package i locates at P<sub>i</sub>(x, y) with a urgency degree U<sub>i</sub>.<br><br>   The following M lines describe the roads. Two formats are potential:<br>   a)Line x<sub>iA</sub>  y<sub>iA</sub>  x<sub>iB</sub>  y<sub>iB</sub>  v<sub>i</sub>: line-shaped road whose endpoints are A<sub>i</sub>(x<sub>iA</sub>,y<sub>iA</sub>) and B<sub>i</sub>(x<sub>iB</sub>,y<sub>iB</sub>).<br>   b)Circle x<sub>i</sub>  y<sub>i</sub>  R<sub>i</sub>  v<sub>i</sub>: circle-shaped road whose centre is O<sub>i</sub>(x<sub>i</sub>, y<sub>i</sub>) with a radius of R<sub>i</sub>.<br><br>   Here, v<sub>i</sub> denotes the limit speed for the ith road, measured in km/h.<br><br><b>Scales</b>:<br>   1&lt;=N&lt;=15<br>   1&lt;=M&lt;=30<br>   0.01&lt;=V<sub>walk</sub>&lt;=10.00, 0.01&lt;=v<sub>i</sub>&lt;=120.00, 0.01&lt;=T<sub>wait</sub>&lt;=60.00<br>   0.01&lt;=U<sub>i</sub>, R<sub>i</sub>&lt;=1000.00.<br><br>   The coordinates, radius, time and speed are float numbers and will be rounded in 2 decimals. The absolute value of coordinates doesn’t exceed 1000.<br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   For each test case, output the minimal sum of dissatisfactions in a line, rounded in 2 decimals.<br>   The test data guarantees that answers will not exceed 10<sup>7</sup>.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1
2 5 6 0
3 1
3 0 1
-2 0 1
Circle 0 0 1 60
Line 1 0 2 0 60
Line 2 -1 2 1 60
Line 2 1 -2 1 60
Line 2 -1 -2 -1 60</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">44.14</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014+Multi-University+Training+Contest+6&source=1&searchmode=source"> 2014 Multi-University Training Contest 6 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>