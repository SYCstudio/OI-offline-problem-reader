<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>The Screen Behind the Mirror</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU2353. The Screen Behind the Mirror</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：3000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Dr. Evil has contracted your valuable services to build for him the world's most powerful &quot;laser&quot;. Of course before you spend one billion dollars<br>building the thing, you want to run some simulations first to make sure everything will work as designed. For this phase of the project, you will be<br>simulating part of the aiming system which uses mirrors and other optics to change the direction of the laser beam.<br><br>The simulation consists of a flat square table with mirrors, beam splitters, and beam detectors arranged on the tabletop, and with each object<br>represented by a one dimensional line segment. The list below describes each of the object types in detail:<br><br>mirror : A mirror object will reflect any laser beam striking its surface. The reflected beam leaves at the same angle of incidence as the<br>incoming beam. Note that both sides of a mirror object are reflective.<br><br>detector : A detector is an opaque object which absorbs any laser beam striking it. The simulation must also keep track of which detectors are<br>struck by a laser for program output purposes. Note that a laser beam strike on either side of a detector counts as a &quot;hit&quot;.<br><br>splitter : When a laser beam strikes a splitter, it divides into two beams. One of the new beams will reflect from the splitter surface (as with a<br>mirror), and the other beam will pass through the splitter without changing direction. A splitter will function the same way regardless which<br>side of it is struck by a laser beam.<br><br>See the figures below for examples of a laser beam's interaction with each of the possible object types:<br><br><center><img style='max-width:100%;' src=./data/images/c131-1003-1.jpg></center><br><br>For each simulation, a single laser beam enters the tabletop area. The program must compute the path taken by the laser beam (including secondary beams due to splitters), and it must determine which detectors are struck by a laser beam.<br><br>You can make the following assumptions in the program:<br><br>1. The tabletop surface is a 100 by 100 square, and unless otherwise specified all coordinates in the program's input are given as integers within<br>the tabletop area (i.e. between 0 and 100 inclusive).<br>2. There will be no overlaps between the line 2. segment objects.<br>3. The laser which enters the tabletop area always starts from the edge of the table.<br>4. The simulation of each data set ends when all laser beams have either exited the table top area or have terminated at a detector.<br>5. For each data set there will be no more than 100 total reflections among all laser beams in that data set.<br>6. A laser beam will never intersect any object on a vertex and will never be collinear with an object's line segment.<br>7. Each data set will contain at least one detector object.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Input to this problem will begin with a line containing a single integer N (1 ≤ N ≤ 100) indicating the number of data sets. Each data set consists of<br>the following components:<br><br>A single line with four numbers &quot;x,y i,j&quot; where x,y is a point along the table edge at which the laser beam enters, and i,j is a vector with integer<br>components(-1024 ≤ i,j ≤ 1024) specifying the direction of the incoming laser beam, where i corresponds to the x-axis direction and j<br>corresponds to the y-axis direction.<br>A line with a single integer P (1 ≤ P ≤ 100) giving the total number of objects in this data set.<br>A series of P lines, each representing one object, with the first line describing object 1, the second line describing object 2, and so on. Each<br>line begins with a single letter specifying the object type where a &quot;M&quot; indicates a mirror object, &quot;S&quot; a splitter, and &quot;D&quot; a detector. This is<br>followed by two coordinate pairs of the form &quot;x,y&quot;, specifying the two end points of the object's line segment.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each data set in the input, output the heading &quot;DATA SET #k&quot; where k is 1 for the first data set, 2 for the second, etc. If in this data set none of the detector objects are struck by any laser beams, output the message &quot;NO BEAMS DETECTED&quot;. Otherwise, output the object number, one per line, of each detector struck by a laser beam. The list of detectors should be sorted by their object numbers and output in ascending order. If a detector is struck by more than one laser beam, it should only be listed once in the output.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1
50,100 0,-1
6
D 0,40 20,20
M 40,20 60,40
D 80,20 100,40
D 0,70 20,90
S 40,90 60,70
D 80,90 100,70</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">DATA SET #1
1
6</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=HDU+2008%278+%B9%AB%BF%AA%C8%FC%A3%A8%B7%C7%D4%AD%B4%B4%A3%A9&source=1&searchmode=source"> HDU 2008'8 公开赛（非原创） </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>