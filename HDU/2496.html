<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Moveable maze</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU2496. Moveable maze</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">After solving a difficult programming problem, you decide to take a break and play a puzzle game. After playing the game for a while, you decide to write a program to solve it for you. <br><br>The game is played on a grid with <i>R</i> rows and <i>C</i> columns. Each square of the grid contains a black dot in the centre and black lines in the direction of some, none, or all of its north, east, south, and west neighbouring squares. Your objective in this game is to move your playing piece from the centre of the square in the <i>i<sub>1</sub></i><sup>th</sup> row and the <i>j<sub>1</sub></i><sup>th</sup> column, where it begins, to the centre of the square in the the <i>i<sub>2</sub></i><sup>th</sup> row and the <i>j<sub>2</sub></i><sup>th</sup> column. <br><br>You wish to do this in the least number of turns possible, where a turn consists of the following two parts. First in each turn, you may opt to select any grid square and rotate it 90 degrees clockwise or counterclockwise. Second in each turn, you may opt to move your piece from the centre of its current grid square to the centre of a neighbouring grid square, provided your piece does not leave the black markings. In other words, you may move from a square A to a neighbouring square B if A has a black line in the direction of B and B has a black line in the direction of A. Note that either part of a turn may be omitted.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Input consists of a number of test cases. The first line of each test case contains the two integers <i>R</i> and <i>C</i>, separated by spaces, with 1 &lt;= <i>R, C</i> &lt;= 20. <br><br>The next line contains the integers <i>i<sub>1</sub>, j<sub>1</sub>, i<sub>2</sub>, j<sub>2</sub></i>, separated by spaces, with 1 &lt;= <i>i<sub>1</sub>, i<sub>2</sub></i> &lt;= <i>R</i> and 1 &lt;= <i>j<sub>1</sub>, j<sub>2</sub></i> &lt;= <i>C</i>.<br><br>The following <i>R</i> lines of input each contain one row of the grid, from north to south. Each of these lines contains exactly <i>C</i> strings of letters, separated by spaces, that correspond to squares of the grid, from west to east. Their format is as follows: <br><ul><li>If the string is the single character x, then the square does not contain a line to any of its neighbours. </li><br><li>Otherwise, the string contains some of the characters N, E, S, W, which indicate that a black line extends from this square's centre in the direction of its north, east, south, or west neighbour, respectively. No character will appear in the string more than once.</li></ul>It is guaranteed that it is possible to move your playing piece from (<i>i<sub>1</sub>, j<sub>1</sub></i>) to (<i>i<sub>2</sub>, j<sub>2</sub></i>). <br><br>Input is terminated by a line containing 0 0. These zeros are not a test case and should not be processed.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Output consists of exactly one line for each test case. The lines contains an integer: the minimum number of turns to move your playing piece from (<i>i<sub>1</sub>, j<sub>1</sub></i>) to (<i>i<sub>2</sub>, j<sub>2</sub></i>). <br></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4 2
1 1 4 1
E SW
x EW
NW ES
N x
0 0

<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>A diagram of the input:

<img src=./data/images/C240-1002-1.jpg'>
</div><i style='font-size:1px'> </i></code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">5

<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>
An example optimal solution is: 

1. Rotate (2,2) clockwise. Step to (1,2). 
2. Rotate (3,2) counterclockwise. Step to (2,2). 
3. Rotate (3,2) counterclockwise. Step to (3,2).
4. Rotate (3,1) clockwise. Step to (3,1).
5. Rotate (3,1) clockwise. Step to (4,1).</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=University+of+Waterloo+Local+Contest+2009.09&source=1&searchmode=source"> University of Waterloo Local Contest 2009.09 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>