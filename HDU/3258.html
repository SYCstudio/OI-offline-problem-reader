<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Intricate to death?</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3258. Intricate to death?</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Have you heard of the game PAL? Many people believe it's the greatest Chinese RPG series so far. There are many characters, including heros and NPCs, summarized in the following paragraph.<br>李 逍 遥：一代主角。<br>赵 灵 儿：一代主角的妻子。<br>李 三 思：一代主角的爸爸。<br>李 忆 如：一代主角的女儿。<br>酒 剑 仙：一代主角的师父。<br>王 小 虎：一代主角的邻居。<br>林 月 如：一代主角的第一个知己。<br>阿　　奴：一个主角的第二个知己。<br>林 青 儿：一代主角的妻子的妈妈。<br>巫　　王：一代主角的妻子的爸爸。<br>景　　天：一代主角的爸爸的师父。<br>独孤剑圣：一代主角的师父的师兄。<br>喻 南 松：一代主角的邻居的朋友。<br>圣　　姑：一代主角的妻子的守护人。<br>沈 欺 霜：一代主角的邻居的女朋友。<br>千叶禅师：一代主角的邻居的朋友的师父。<br>紫　　萱：一代主角的妻子的妈妈的妈妈。<br>铁掌飞凤：一代主角的爸爸的弟弟的妻子。<br>龙　　葵：一代主角的爸爸的师父的前世的妹妹。<br>飞　　蓬：一代主角的爸爸的师父的前世的前世。<br>徐 长 卿：一代主角的妻子的妈妈的妈妈的丈夫的转世。<br>夕　　瑶：一代主角的爸爸的师父的前世的前世的女朋友。<br>清　　微：一代主角的妻子的妈妈的妈妈的丈夫的转世的师父。<br>周 赤 炎：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份。<br>燎　　日：一代主角的妻子的妈妈的妈妈所救的狼妖的妖的身份。<br>慕容紫英：一代主角的爸爸的师父的前世铸的剑的第一个发现者。<br>苏　　媚：一代主角和一代主角的第一个知己所杀的妖怪的孩子。<br>云 天 河：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄。<br>拜月教主：一代主角和一代主角的妻子和一代主角的妻子的妈妈的仇人。<br>云 天 青：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸。<br>怀　　朔：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的师兄。<br>璇　　玑：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的师姐。<br>韩 菱 纱：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的女朋友。<br>玄　　霄：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸的师兄。<br>夙　　玉：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸的妻子。<br>南 宫 煌：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的弟弟。<br>星　　璇：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的哥哥。<br>重　　楼：一代主角的爸爸的师父和一代主角的爸爸的师父的前世的前世的朋友兼敌人。<br>柳 梦 璃：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸所救的女妖。<br>思　　堂：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的哥哥的朋友。<br>王 蓬 絮：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的哥哥的女朋友。<br>温　　慧：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的弟弟的女朋友。<br>雪　　见：一代主角的爸爸的师父的前世的前世的女朋友给一代主角的爸爸的师父做的女朋友。<br>婵　　幽：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸所救的女妖的妈妈。<br>花　　楹：一代主角的爸爸的师父的前世的前世的女朋友给一代主角的爸爸的师父做的女朋友的宠物。<br>温　　策：一代主角的妻子的妈妈的妈妈所救的狼妖的人的身份的两个儿子中的弟弟的女朋友的哥哥。<br>归　　邪：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸所救的女妖的妈妈的手下武将。<br>奚　　仲：一代主角的爸爸的师父的前世铸的剑的第一个发现者的师侄的爸爸所救的女妖的妈妈的手下文官。<br><br>Obviously, some of the descriptions are deliberately lengthened, in order to make the whole paragraph more fun.<br>In this problem, your task is similar: given a set of rules, find a description that is at least A characters and at most B characters long.<br>If there are more than one possible description satisfying the condition above, choose the one that comes first lexicographically. <br>Note that shorter answers are NOT always better than longer ones.<br>BTW: Rules like &quot;Lixiaoyao: Lixiaoyao&quot; looks rather stupid, so don't print things like that, even if no other solutions can be found.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">The first line contains a single integer T (T &lt;= 10), the number of test cases. <br>Each case begins with an integer n (1 &lt;= n &lt;= 5), the number of rules, followed by n lines, each describing a rule. Each rule begins with the character's name, then a colon, then a single space, and the description. The description is a list of tokens separated by a single space, with no leading spaces or trailing spaces, followed by a period. Each token is either a word consisting of only lowercase letters, or a character's name, or a character's name, followed by an apostrophe('), then a lowercase letter 's'. A character's name is always an uppercase letter followed by zero or more lowercase letters. No two characters will have the same name, but not all character names appear in the left side of a rule. After the ruleset, you'll be given a single integer q (1 &lt;= q &lt;= 5) on the next line, indicating the number of queries. Each query appears on its own line, containing the name of the character in question, then two integers A and B (1 &lt;= A &lt;= B &lt;= 100), explained above. <br>Each rule is at least 15 characters, at most 100 characters, containing at least one lowercase token. On the right side of each rule, there will be at most 3 characters involved, all distinct (though one of them may appear on the left side of the rule), and there are no more than 10000 different descriptions for any character in questions, if we only count descriptions only length &lt;= B.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, print the case number in the first line, then q answers in the following q lines, one for each line.<br>If there is no solution, print 'No solution.' (without quote), otherwise a sentence describing the character. The sentence should be in the same format as a rule in the input. The length of the sentence (including everything: the character's name, the colon, the space, the description, and the final period) should be at least A and at most B.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2
2
Alice: Bob's mother.
Bob: Alice's son.
2
Alice 20 20
Bob 24 25
4
A: B's girlfriend.
B: A's boyfriend.
C: the only person who knows that A and B love each other.
A: D's smallest daughter.
5
A 1 100
C 1 50
C 70 80
C 71 80
C 82 90</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1:
Alice: Bob's mother.
Bob: Bob's mother's son.
Case 2:
A: A's boyfriend's girlfriend.
No solution.
C: the only person who knows that A and A's boyfriend love each other.
C: the only person who knows that B's girlfriend and B love each other.
C: the only person who knows that A and B's girlfriend's boyfriend love each other.</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2009+Asia+Regional+Ningbo+Online&source=1&searchmode=source"> 2009 Asia Regional Ningbo Online </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>