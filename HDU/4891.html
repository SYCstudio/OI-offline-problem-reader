<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>The Great Pan</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4891. The Great Pan</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：2000/1000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   As a programming contest addict, Waybl is always happy to take part in various competitive programming contests. One day, he was competing at a regional contest of Inventing Crappy Problems Contest(ICPC). He tried really hard to solve a &quot;geometry&quot; task without success.<br><br>   After the contest, he found that the problem statement is ambiguous! He immediately complained to jury. But problem setter, the Great Pan, told him &quot;There are only four possibilities, why don't you just try all of them and get Accepted?&quot;.<br><br>   Waybl was really shocked. It is the first time he learned that enumerating problem statement is as useful as trying to solve some ternary search problem by enumerating a subset of possible angle!<br><br>   Three years later, while chatting with Ceybl, Waybl was told that some problem &quot;setters&quot; (yeah, other than the Great Pan) could even change the whole problem 30 minutes before the contest end! He was again shocked.<br><br>   Now, for a given problem statement, Waybl wants to know how many ways there are to understand it.<br><br>   A problem statement contains only newlines and printable ASCII characters (32 ≤ their ASCII code ≤ 127) except '{', '}', '|' and '$'.<br><br>   Waybl has already marked all ambiguity in the following two formats:<br><br>    1.{A|B|C|D|...} indicates this part could be understand as A or B or C or D or ....<br>    2.$blah blah$ indicates this part is printed in proportional fonts, it is impossible to determine how many space characters there are.<br><br>   Note that A, B, C, D won't be duplicate, but could be empty. (indicate evil problem setters addedclarified it later.)<br><br>   Also note that N consecutive spaces lead to N+1 different ways of understanding, not 2<sup>N</sup> ways.<br><br>   It is impossible to escape from &quot;$$&quot; and &quot;{}&quot; markups even with newlines. There won't be nested markups, i.e. something like &quot;${A|B}$&quot; or &quot;{$A$|B}&quot; or &quot;{{A|B}|C}&quot; is prohibited. All markups will be properly matched.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Input contains several test cases, please process till EOF.<br>   For each test case, the first line contains an integer n, indicating the line count of this statement. Next n lines is the problem statement.<br>   1 ≤ n ≤ 1000, size of the input file will not exceed 1024KB.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   For each test case print the number of ways to understand this statement, or &quot;doge&quot; if your answer is more than <b>10<sup>5</sup></b>.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">9
I'll shoot the magic arrow several
 times on the ground, and of course
 the arrow will leave some holes
 on the ground. When you connect
 three holes with three line segments,
 you may get a triangle.
{|It is hole! Common sense!|
No Response, Read Problem
 Statement|don't you know what a triangle is?}
1
Case $1: = >$
5
$/*This is my code printed in
 proportional font, isn't it cool?*/
printf("Definitely it is cooooooool \
%d\n",4 * 4 * 4 * 4 * 4 * 4 * 4 * 4 * 4 
* 4 * 4 * 4 * 4 * 4 * 4 * 4 * 4 * 4);$
2
$Two  space$ and {blue|
red} color!</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">4
4
doge
6</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014+Multi-University+Training+Contest+3&source=1&searchmode=source"> 2014 Multi-University Training Contest 3 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>