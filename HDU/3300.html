<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Escape Plan</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU3300. Escape Plan</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：10000/5000 MS (Java/Others)</span> <span class="ui label">时间限制：32768/32768 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">    Without turning his head, Vader snarled through his mask, ``The Millennium Falcon?&quot; <br><br>    Piett paused a moment before replying. He would have preferred to avoid that issue. ``Our tracking scanners are on it now,&quot; he responded a bit fearfully. <br><br>    Vader turned to face the admiral, his towering figure looming over the frightened officer. Piett felt a chill course through his veins, and when the Dark Lord spoke again his voice conveyed an image of the dreadful fate that would be inflicted if his commands were not executed. <br><br>    ``I want that ship,&quot; he hissed. <br><br>    The ice planet was rapidly shrinking to a point of dim light as the Millennium Falcon sped into space. Soon that planet seemed nothing more than one of the billions of light specks scattered throughout the black void. <br><br>    But the Falcon was not alone in its escape into deep space. Rather, it was followed by an Imperial fleet that included the Avenger Star Destroyer and a half-dozen TIE fighter. The fighters moved ahead of the huge, slower-moving Destroyer, and closed in on the fleeing Millennium Falcon. <br><br>    -- Star Wars, Episode V, the Empire Strikes Back<br><br><br>You are driving Millennium Falcon, the fastest starship of the entire galaxy, to escape Imperial pursuit. There are N planet systems, numbered from 0 to N - 1 , and some of them are connected by one-way hyperspace tunnels. Some hyperspace tunnels are passable at all times, while others are only available at certain times. Initially you are at the ice planet Hoth, the system numbered 0, at time 0 and you need to get to Sullust, the system numbered N - 1 . Since there are K Imperial Star Destroyers following you, and they will also make the jump into the hyperspace to continue the pursuit, you have decided to use the (K + 1) -th shortest path from Hoth to Sullust so as to minimize the possibility of being attacked halfway by Imperial starships; furthermore, in order to avoid detection, you do not want to risk staying at a system longer than T seconds.<br><br>Note that multiple shortest paths may require same travel time, and your travel path may not be simple (i.e. you are allowed to visit some systems and use some hyperspace tunnels more than once during your journey). </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are multiple test cases in the input file. Each test case starts with four integers N , M , K  and T  , (1&lt;=N&lt;=100, 0&lt;=M&lt;=500, 0&lt;=K&lt;=9, 0&lt;=T&lt;=100) , the number of planet systems, the number of hyperspace tunnels between them, the pursuing Imperial Star Destroyers, and the maximal allowed time to stay at the same system, respectively. M  lines follow, each line describes one of the hyperspace tunnels: four integers U , V , C , and W , (0&lt;=U, V&lt;=N - 1, 1&lt;=C&lt;=10, 1&lt;=W&lt;=1000000)  meaning there's a tunnel from U  to V , traveling through this path requires W  seconds and it is only available every C  seconds, starting from time 0 (i.e. 0, C, 2 * C, 3 * C...  seconds).<br><br>Two successive inputs are separated by a blank line. N = 0, M = 0, K = 0, T = 0 indicates the end of input and should not be processed by your program. </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">or every test case, you should output one integer on a separate line, the total time we need to reach Sullust in the format as indicated in the sample output; output -1 if no such path can be found.<br><br><br>Explanation for Sample Input / Output<br><br><br>The 1st shortest path in this example is 0 --&gt; 4 , with a total travel time of 4 seconds; the 2nd shortest path is 0 (Wait 2 seconds) --&gt; 2 (Wait 2 seconds) --&gt;4, with a total travel time of 18 seconds; the 3rd shortest path is 0 (Wait 2 seconds) --&gt; 2 (Wait 2 seconds) --&gt; 3 --&gt; 0 --&gt; 4, with a total travel time of 28 seconds. </div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">5 9 2 2 
1 2 5 5 
2 4 6 6 
0 2 1 8 
1 4 4 3 
3 0 1 8 
1 3 5 10
0 4 4 4 
2 3 3 4 
3 1 5 10

10 0 0 0 

0 0 0 0</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">Case 1:  28
Case 2:  -1</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2006+Asia+Regional+Shanghai+&source=1&searchmode=source"> 2006 Asia Regional Shanghai  </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>