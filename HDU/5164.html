<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Matching on Array</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU5164. Matching on Array</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：4000/2000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">Alice has a sequence $\{a_1, a_2, \dots, a_n\}$ with $n$ positive integers. Bob has some positive integer sequences with different size. Alice wants to know the total occurrences of every sequence Bob has in Alice's sequence (the occurrences are allowed to overlap).<br><br>We say one sequence $B$ occurs in another sequence $A$ if there is a contiguous subsequence of $A$ that is the same as $B$ after scaled by a positive real factor.<br><br>For example $A=\{2,4,8,16\}, B = \{1, 2\}$ then $B$ occurs three times in $A$. The occurrences are $\{2, 4\}$, $\{4,8\}$ and $\{8, 16\}$. And the factor is 0.5, 0.25 and 0.125.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">There are multiple test cases. The first line of input contains an integer $T\ (1 \le T \le 30)$, indicating the number of test cases. For each test case:<br><br>The first line contains two integer $n$ and $m$  $(1 \le n, m \le 100000)$, indicating the size of Alice's sequence and the number of sequences Bob has. In the next line, there are $n$ integers, $a_1, a_2, \dots, a_n$, indicating Alice's sequence. In the following $m$ lines, each starts with an integer $k_i (1 \le k_i \le 300000)$ - the size of the sequence. Then $k_i$ space separated positive integers follow, indicating the sequence.<br><br>The total sum of $k_i$ is less than or equal to 1000000. Other integers are between 1 and 10000, inclusive.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">For each test case, output a single line with a single integer, indicating the total number of occurrences.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">2
4 1
2 4 8 16
2 1 2
5 3
2 4 2 4 6
3 1 2 1
1 5
2 16 8</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">3
7
<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>For sample 1, please refer to the problem description. For sample 2, {1, 2, 1} occurs only once, {5} occurs five times and {16, 8} occurs only once.</div><i style='font-size:1px'> </i></div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=BestCoder+Round+%2327&source=1&searchmode=source"> BestCoder Round #27 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>