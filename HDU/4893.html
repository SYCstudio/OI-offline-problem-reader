<html><head><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>Wow! Such Sequence!</title></head><body><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">HDU4893. Wow! Such Sequence!</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：10000/5000 MS (Java/Others)</span> <span class="ui label">时间限制：65536/65536 K (Java/Others)</span></div></div></br><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Recently, Doge got a funny birthday present from his new friend, Protein Tiger from St. Beeze College. No, not cactuses. It's a mysterious blackbox.<br><br>   After some research, Doge found that the box is maintaining a sequence an of n numbers internally, initially all numbers are zero, and there are THREE &quot;operations&quot;:<br><br>    1.Add d to the k-th number of the sequence.<br>    2.Query the sum of ai where  l ≤ i ≤ r.<br>    3.Change ai to the nearest Fibonacci number, where l ≤ i ≤ r.<br>    4.Play sound &quot;Chee-rio!&quot;, a bit useless.<br><br>   Let F<sub>0</sub> = 1,F<sub>1</sub> = 1,Fibonacci number Fn is defined as F<sub>n</sub> = F<sub>n - 1</sub> + F<sub>n - 2</sub> for n ≥ 2.<br><br>   Nearest Fibonacci number of number x means the smallest Fn where |F<sub>n</sub> - x| is also smallest.<br><br>   Doge doesn't believe the machine could respond each request in less than 10ms. Help Doge figure out the reason.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   Input contains several test cases, please process till EOF.<br>   For each test case, there will be one line containing two integers n, m.<br>   Next m lines, each line indicates a query:<br><br>     1 k d - &quot;add&quot;<br>     2 l r - &quot;query sum&quot;<br>     3 l r - &quot;change to nearest Fibonacci&quot;<br><br>   1 ≤ n ≤ 100000,  1 ≤ m ≤ 100000, |d| &lt; 2<sup>31</sup>, all queries will be valid.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">   For each Type 2 (&quot;query sum&quot;) operation, output one line containing an integer represent the answer of this query.</div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">1 1
2 1 1
5 4
1 1 7
1 3 17
3 2 4
2 1 5</code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">0
22</div></code></pre></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"> <a href="/search.php?field=problem&key=2014+Multi-University+Training+Contest+3&source=1&searchmode=source"> 2014 Multi-University Training Contest 3 </a> </div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">OI-offline-problem-reader Powered by <a href="http://www.sycstudio.com">SYCstudio</a>.</span></div></div></div></body></html>